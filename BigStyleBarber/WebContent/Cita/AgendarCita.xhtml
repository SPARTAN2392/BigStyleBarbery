<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/plantilla/layout.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:c="http://java.sun.com/jsp/jstl/core">
    
    <ui:define name="content">        
    	<script src="http://maps.google.com/maps/api/js?key=AIzaSyBGmnx2wIcNMKY0r5fqpF7UUOJwqeOwtf8" type="text/javascript"></script>
    	<script src="../js/AgendarCita.js"/>
        <h:form id="agendarCitaForm" >
			<p:fieldset style="margin-bottom:20px;height:95%  ">
				<h:inputHidden value="#{controladorCita.diasTrabajoBarbero}" id="diasTrabajo"/>
				<p:messages id="messages" showDetail="true" closable="true"/>
				<p:wizard flowListener="#{controladorCita.onFlowProcess}">
			        <p:tab id="sucursalTab" title="Sucursal">
			            <p:panel header="Elige la Sucursal">			        
			            	<p:panelGrid styleClass="gridNoBorder">
		                		<p:row>
		                			<p:column>
										<p:selectOneListbox  id="sucursalList" value="#{controladorCita.poCita.poSucursal}" var="item"  
							                    	converter="sucursalConverter" style="width:300px" scrollHeight="400" >
								            <f:selectItems value="#{controladorCita.catSucursal}" var="sucursal" 
								            itemLabel="#{sucursal.psNombreBarberia}" 						            
								            itemValue="#{sucursal}" />	
								            
								            <p:column>
								            	<h:panelGrid columns="1">
								            		<p:outputLabel value="#{item.psNombreBarberia}" styleClass="cabecerasListas"/>
								            		<p:outputLabel value="#{item.psDireccion}" />
								            	</h:panelGrid>						            	
								            </p:column>						            
								            					            	
								            <p:ajax update="mapa"/>
								            
								        </p:selectOneListbox>
									</p:column>
									<p:column style="width:100%">	
										<p:gmap id = "mapa" center="#{controladorCita.poCita.poSucursal.psCoordenadas}" zoom="15" type="HYBRID" style="width:100%;height:400px" />								 
									</p:column>		  
		                    	</p:row>                    	                    	                		                		        				        			
				    		</p:panelGrid>
			                
			            </p:panel>
			        </p:tab>
			        
			        <p:tab id="servicioTab" title="Servicio">
			            <p:panel header="Elige el Servicio">
			            	<p:selectOneListbox  id="servicioList" value="#{controladorCita.poCita.poServicio}" var="item"  
				                    	converter="servicioListConverter" style="width:300px" scrollHeight="400" >
					            <f:selectItems value="#{controladorCita.listaServicio}" var="servicio" 
					            itemLabel="#{servicio.psNombreServicio}" 						            
					            itemValue="#{servicio}" />	
					            
					            <p:column>
					            	<h:panelGrid columns="1">
					            		<p:outputLabel value="#{item.psNombreServicio}" styleClass="cabecerasListas"/>
					            		<p:outputLabel value="#{item.psDescripcion}" />
					            	</h:panelGrid>						            	
					            </p:column>						            					            					            						           					            
					            
					        </p:selectOneListbox>
			            </p:panel>
			        </p:tab>
			        
			        <p:tab id="barberoTab" title="Barbero">
			            <p:panel header="Elige el Barbero">
			            	<p:selectOneListbox  id="barberoList" value="#{controladorCita.poCita.poBarbero}" var="item"  
				                    	converter="barberoListConverter" style="width:300px" scrollHeight="400" >
					            <f:selectItems value="#{controladorCita.listaBarbero}" var="barbero" 
					            itemLabel="#{barbero.psNombreBarbero} #{barbero.psApellidoPaterno} #{barbero.psApellidoMaterno}" 						            
					            itemValue="#{barbero}" />	
					            
					            <p:column>
					            	<h:panelGrid columns="1">
					            		<p:outputLabel value="#{item.psNombreBarbero} #{item.psApellidoPaterno} #{item.psApellidoMaterno}" styleClass="cabecerasListas"/>
					            		<p:outputLabel value="#{item.poPuestoFK.psPuesto}" />
					            	</h:panelGrid>						            	
					            </p:column>						            
					            					            	
					            
					        </p:selectOneListbox>
			            </p:panel>
			        </p:tab>
			        
			        <p:tab id="calendarioTab" title="Día Y Hora">
			            <p:panel header="Elige el Día y la Hora">
			            
			            	<h:panelGrid columns="2">
				            	<h:panelGrid columns="1">
				            		<p:outputLabel for="calendario" value="Dia:" />
	        						<p:calendar id="calendario" value="#{controladorCita.poCita.ptDia}" mode="inline" 
	        							mindate="#{controladorCita.hoy}" beforeShowDay="diasDeshabilitados"/>
				            	</h:panelGrid>			            	
				            	
				            	<h:panelGrid columns="1">
				            		<p:outputLabel value="Horario Disponible para el " />
	        						<h:panelGrid columns="2">
	        							<p:outputLabel  value="Mañana" />
	        							<p:outputLabel  value="Tarde" />
	        							
	        							<p:selectOneListbox  id="horarioList" value="#{controladorCita.poCita.poBarbero}" style="width:300px" scrollHeight="400" >
								            <f:selectItems value="#{controladorCita.horarios}" var="horario" 
								            itemLabel="#{horario}" 						            
								            itemValue="#{horario}" />	
								            								        					            					            		
					       				</p:selectOneListbox>
											        							
	        						</h:panelGrid>
				            	</h:panelGrid>
				            </h:panelGrid>
			            </p:panel>
			        </p:tab>
				</p:wizard>
			</p:fieldset>
		</h:form>
	</ui:define>
</ui:composition>